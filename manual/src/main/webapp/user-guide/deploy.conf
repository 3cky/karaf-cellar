h1. Deploy Cellar

This chapter describes how to deploy and start Cellar into a running Apache Karaf instance. This chapter
assumes that you already know Apache Karaf basics, especially the notion of features and shell usage.

h2. Registering Cellar features

Karaf Cellar is provided as a Karaf features XML descriptor.

Simply register the Cellar feature URL in your Karaf instance:

{code}
karaf@root()> feature:repo-add mvn:org.apache.karaf.cellar/apache-karaf-cellar/3.0.0-SNAPSHOT/xml/features
Adding feature url mvn:org.apache.karaf.cellar/apache-karaf-cellar/3.0.0-SNAPSHOT/xml/features
{code}

Now you have Cellar features available in your Karaf instance:

{code}
karaf@root()> feature:list |grep -i cellar
cellar-core                   | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Karaf clustering core
hazelcast                     | 3.2.3   |           | karaf-cellar-3.0.0-SNAPSHOT | In memory data grid
cellar-hazelcast              | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Cellar implementation based on Hazelcast
cellar-config                 | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | ConfigAdmin cluster support
cellar-features               | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Karaf features cluster support
cellar-bundle                 | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Bundle cluster support
cellar-shell                  | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Cellar shell support
cellar                        | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Karaf clustering
cellar-dosgi                  | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | DOSGi support
cellar-obr                    | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | OBR cluster support
cellar-eventadmin             | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | OSGi events broadcasting in clusters
cellar-cloud                  | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Cloud blobstore support in clusters
cellar-webconsole             | 3.0.0   |           | karaf-cellar-3.0.0-SNAPSHOT | Cellar plugin for Karaf WebConsole
{code}

h2. Starting Cellar

To start Cellar in your Karaf instance, you only need to install the Cellar feature:

{code}
karaf@root()> feature:install cellar
{code}

You can now see the Cellar components (bundles) installed:

{code}
karaf@root()> la|grep -i cellar
80 | Active   |  30 | 3.0.0        | Apache Karaf :: Cellar :: Core
81 | Active   |  31 | 3.0.0        | Apache Karaf :: Cellar :: Utils
82 | Active   |  33 | 3.0.0        | Apache Karaf :: Cellar :: Hazelcast
83 | Active   |  40 | 3.0.0        | Apache Karaf :: Cellar :: Shell
84 | Active   |  40 | 3.0.0        | Apache Karaf :: Cellar :: Config
85 | Active   |  40 | 3.0.0        | Apache Karaf :: Cellar :: Bundle
86 | Active   |  40 | 3.0.0        | Apache Karaf :: Cellar :: Features
{code}

And Cellar cluster commands are now available:

{code}
karaf@root()> cluster:<TAB>
cluster:bundle-install        cluster:bundle-list           cluster:bundle-start          cluster:bundle-stop           cluster:bundle-uninstall      cluster:config-list           cluster:config-propappend     cluster:config-propdel        cluster:config-proplist       cluster:config-propset
cluster:consumer-start        cluster:consumer-status       cluster:consumer-stop         cluster:feature-install       cluster:feature-list          cluster:feature-uninstall     cluster:feature-url-add       cluster:feature-url-list      cluster:feature-url-remove    cluster:group-create
cluster:group-delete          cluster:group-join            cluster:group-list            cluster:group-pick            cluster:group-quit            cluster:group-set             cluster:handler-start         cluster:handler-status        cluster:handler-stop          cluster:node-list
cluster:node-ping             cluster:producer-start        cluster:producer-status       cluster:producer-stop         cluster:sync
{code}
